<!doctype html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';a
    base-uri 'self';
    object-src 'none';
    frame-ancestors 'none';
    img-src 'self' data:;
    style-src 'self';
    script-src 'self';
    connect-src 'self' http://localhost:8081"> -->

  <title>TH Spedition – Start</title>

  <!-- API-Basis zuerst definieren -->
  <!-- <script>
    window.API_BASE = window.API_BASE || 'http://localhost:8081';
  </script> -->

  <!-- Redirect-Logik -->
  <script type="module">
    import { isLoggedIn } from './js/auth.js';

    window.addEventListener('DOMContentLoaded', () => {
      const target = isLoggedIn() ? 'start.html' : 'login.html';
      // Nur weiterleiten, wenn wir nicht schon auf der Zielseite sind
      if (!location.pathname.endsWith('/' + target)) {
        location.replace(target);
      }
    });
  </script>

  <!-- Fallback ohne JS -->
  <noscript>
    <meta http-equiv="refresh" content="0;url=login.html">
  </noscript>

  <style>
    /* Optional: mini Loader während der Weiterleitung */
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial
    }

    .boot {
      height: 100dvh;
      display: grid;
      place-items: center;
      color: #444
    }
  </style>
  <link rel="stylesheet" href="style/icons.css">
  <link rel="stylesheet" href="style/unsaved-changes-modal.css">
</head>

<body>
  <div class="boot">Weiterleiten…</div>
  <script type="module" src="js/icons.js"></script>
  <script type="module" src="js/unsaved-changes-guard.js"></script>
</body>

</html>